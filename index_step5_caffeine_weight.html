
<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<title>ピーキング戦略 - 個別補正版</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    .container { background: #fff; padding: 20px; border-radius: 10px; max-width: 800px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label { display: block; margin-top: 15px; font-weight: bold; }
    select, input { width: 100%; padding: 8px; font-size: 1em; margin-top: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #eee; }
    button { margin-top: 20px; padding: 10px 15px; font-size: 1em; background: #4CAF50; color: white; border: none; border-radius: 5px; }
  </style>
</head>
<body>
<div class="container">
<h1>ピーキング戦略（感受性補正 + 手入力）</h1>
<input id="weight" placeholder="例：70" type="number"/><label for="weight">体重（kg）</label><label for="tdee">TDEE（1日の消費カロリー）</label>
<input id="tdee" placeholder="例：2500" type="number"/>
<label for="bodyfat">体脂肪率（％）</label>
<input id="bodyfat" placeholder="例：15" type="number"/>
<label for="days">ピーキング期間を選択</label>
<select id="days">
<option value="0">ピーキングなし</option>
<option value="3">3日間</option>
<option value="5">5日間</option>
<option selected="" value="7">7日間</option>
<option value="10">10日間</option>
</select>
<label for="waterSensitivity">水分感受性</label>
<select id="waterSensitivity">
<option value="low">低</option>
<option selected="" value="medium">中</option>
<option value="high">高</option>
</select>
<label for="saltSensitivity">塩分感受性</label>
<select id="saltSensitivity">
<option value="low">低</option>
<option selected="" value="medium">中</option>
<option value="high">高</option>
</select>
<label for="carbSensitivity">カーボ感受性</label>
<select id="carbSensitivity">
<option value="low">低</option>
<option selected="" value="medium">中</option>
<option value="high">高</option>
</select>
<button onclick="generateStrategy()">戦略を表示</button>
<div id="output"></div>
</div>
<script>
function generateStrategy() {
  const days = parseInt(document.getElementById("days").value);
  const weight = parseFloat(document.getElementById("weight").value);
  const tdee = parseFloat(document.getElementById("tdee").value);
  const bodyfat = parseFloat(document.getElementById("bodyfat").value);
  const wSens = document.getElementById("waterSensitivity").value;
  const sSens = document.getElementById("saltSensitivity").value;
  const cSens = document.getElementById("carbSensitivity").value;

  if (!weight || !tdee || !bodyfat || days === 0) {
    document.getElementById("output").innerHTML = "<p>すべての値を入力してください。</p>";
    return;
  }

  function adjust(base, sens) {
    if (sens === "low") return base * 1.1;
    if (sens === "high") return base * 0.9;
    return base;
  }

  const waterBase = [4, 3, 2, 1.5, 1, 0.5, 0.3, 0.2, 0.2, 0.1];
  const saltBase = [100, 100, 80, 60, 50, 30, 10, 5, 5, 2];
  const carbBase = [50, 40, 30, 20, 100, 150, 120, 100, 80, 50];

  let html = "<table><tr><th>日付</th><th>水分 (L)</th><th>塩分 (%)</th><th>カーボ (%)</th><th>カーボ量 (g)</th><th>カフェイン (mg)</th></tr>";
  for (let i = days - 1; i >= 0; i--) {
    const carbRatio = carbBase[i] || 0;
    const carbGrams = Math.round(tdee * (carbRatio / 100) / 4);
    html += `<tr><td>大会${i === 0 ? '当日' : i + '日前'}</td>
              <td>${adjust(waterBase[i] || 0, wSens).toFixed(1)}L</td>
              <td>${adjust(saltBase[i] || 0, sSens).toFixed(0)}%</td>
              <td>${carbRatio}%</td>
              <td>${adjust(carbGrams, cSens).toFixed(0)}g</td>
              <td>${i === 0 ? Math.min(Math.round(weight * 4), 400) + "mg" : "-"}</td></tr>`;
  }
  html += "</table>";
  document.getElementById("output").innerHTML = html;
}
</script>
</body>
</html>
